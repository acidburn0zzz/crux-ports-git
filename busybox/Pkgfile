# Description: Utilities for rescue and embedded systems.
# URL:         http://www.busybox.net
# Packager:    Danny Rawlins, crux at romster dot me
# Maintainer:  6c37 Team, https://github.com/6c37/crux-ports/issues
# Depends on:  

name=busybox
version=1.23.2
release=1
source=(http://busybox.net/downloads/busybox-$version.tar.bz2)


build() {
	cd $name-$version

	# https://bugs.gentoo.org/show_bug.cgi?id=310413
	export CFLAGS+=' -fno-strict-aliasing'

	[ "$CC" ] || CC=gcc

	make defconfig
	make CC="$CC"
	install -m 0755 -D busybox $PKG/sbin/busybox

	make clean
	export LDFLAGS+=' -static'
	make defconfig
	make CC="$CC"
	install -m 0755 -D busybox $PKG/sbin/busybox.static
}

