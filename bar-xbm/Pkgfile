# Description: A lightweight xcb based bar, with xbm patch - git checkout
# URL:         http://github.com/LemonBoy/bar/
# Packager:    onodera, onodera at openmailbox dot org
# Maintainer:  onodera, onodera at openmailbox dot org
# Depends on:  git xorg-libxcb xorg-xcb-util-image

name=bar-xbm
version=git
release=1
source=(
	xbm.patch
	https://raw.githubusercontent.com/rootcoma/bar/feature_xbm_images/xbm.c
)

build() {
	cd $PKGMK_SOURCE_DIR

	if cd $name; then
		git fetch -q; git reset --hard origin/master
	else
		git clone git://github.com/LemonBoy/bar $name
		cd $name
	fi

	cp $SRC/xbm.c .
	patch -p1 < $SRC/xbm.patch

	make all doc
	install -Dm755 bar   $PKG/usr/bin/bar
	install -Dm644 bar.1 $PKG/usr/man/man1/bar.1
}
