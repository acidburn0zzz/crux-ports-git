# Description: Terminal based IRC client for UNIX systems (git checkout)
# URL:         http://www.irssi.org/
# Packager:    Luiz de Milon, kori at openmailbox dot org
# Maintainer:  Luiz de Milon, kori at openmailbox dot org 
# Depends on:  elinks git glib

name=irssi
version=git
release=1
source=()

build () {
	cd $PKGMK_SOURCE_DIR

	if cd $name; then
		git fetch -q; git reset --hard origin/master
	else
		git clone https://github.com/irssi/irssi $name
		cd $name
	fi

	./autogen.sh \
		--prefix=/usr \
		--mandir=/usr/man \
		--enable-ipv6 \
		--with-proxy \
		--with-perl-lib=site

	make
	make DESTDIR=$PKG install

	rm -rf $PKG/usr/share/{doc,irssi/help}
	rm $(find $PKG -name .packlist -or -name perllocal.pod -or -name '*.bs')
}
