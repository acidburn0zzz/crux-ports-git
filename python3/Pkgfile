# Description: Python interpreter, version 3.4.
# URL:         http://www.python.org/
# Packager:    Kristian Lehmann, email at zero-io dot net
# Maintainer:  6c37 Team, https://github.com/6c37/crux-ports/issues
# Depends on:  sqlite3 expat libffi

name=python3
version=3.4.3
release=2
source=(http://python.org/ftp/python/$version/Python-$version.tar.xz)

build() {
	cd Python-$version

	./configure --prefix=/usr \
		--mandir=/usr/man \
		--enable-shared \
		--with-threads \
		--with-sqlite \
		--enable-ipv6 \
		--with-threads \
		--with-computed-gotos \
		--with-system-expat \
		--with-system-ffi \
		--without-ensurepip

	make
	make DESTDIR=$PKG install

	rm $PKG/usr/bin/2to3

	# remove junk files
	find $PKG -name "README*" -delete
	find $PKG -name "ChangeLog*" -delete
	find $PKG -name "TODO*" -delete
	find $PKG -name "NEWS*" -delete
}
